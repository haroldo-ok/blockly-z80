<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="../../blockly/blockly_compressed.js"></script>
    <script type="text/javascript" src="../../blockly/blocks_compressed.js"></script>
    <script type="text/javascript" src="../../blocks/hardware.js"></script>
	
	<script type="text/javascript" src="../../generators/z80.js"></script>
	<script type="text/javascript" src="../../generators/z80/colour.js"></script>
	<script type="text/javascript" src="../../generators/z80/lists.js"></script>
	<script type="text/javascript" src="../../generators/z80/logic.js"></script>
	<script type="text/javascript" src="../../generators/z80/loops.js"></script>
	<script type="text/javascript" src="../../generators/z80/math.js"></script>
	<script type="text/javascript" src="../../generators/z80/procedures.js"></script>
	<script type="text/javascript" src="../../generators/z80/text.js"></script>
	<script type="text/javascript" src="../../generators/z80/variables.js"></script>
	<script type="text/javascript" src="../../generators/z80/hardware.js"></script>
	
    <script type="text/javascript" src="../../blockly/msg/js/en.js"></script>
    <style>
      html, body {
        background-color: #fff;
        margin: 0;
        padding: 0;
        overflow: hidden;
        height: 100%;
      }
      .blocklySvg {
        height: 100%;
        width: 100%;
      }
    </style>
    <script>
      function init() {
        Blockly.inject(document.body,
            {toolbox: document.getElementById('toolbox')});
        // Let the top-level application know that Blockly is ready.
        window.parent.blocklyLoaded(Blockly);
      }
    </script>
  </head>
  <body onload="init()">
    <xml id="toolbox" style="display: none">
	<!--
      <block type="controls_if"></block>
      <block type="logic_compare"></block>
	-->
<!--      <block type="controls_repeat"></block> -->
	  <!--
      <block type="controls_repeat_ext"></block>
	  --->
<!--	  
      <block type="text"></block>
      <block type="text_print"></block>
-->
      <category name="Arithmetic">
		  <block type="math_number"></block>
		  <block type="math_arithmetic"></block>
	  </category>

      <category name="Variables">
		  <block type="variables_get"></block>
		  <block type="variables_set"></block>
	  </category>

      <category name="Text">
		  <block type="text"></block>
		  <block type="text_print"></block>
	  </category>

      <category name="Logic">
		  <block type="controls_if"></block>
		  <block type="logic_compare"></block>
		  <block type="logic_boolean"></block>
		  <block type="logic_negate"></block>		  
		  <block type="logic_operation"></block>		  
		  <block type="logic_ternary"></block>		  
	  </category>

      <category name="Looping">
		  <block type="controls_repeat"></block>
		  <block type="controls_repeat_ext"></block>
		  <block type="controls_whileUntil"></block>
	  </category>

      <category name="Hardware">
		  <block type="hardware_update_sprites"></block>
		  <block type="hardware_sprite_move"></block>
		  <block type="hardware_wait_vblank"></block>
	  </category>

      <category name="Example">
		  <!-- Prints OK -->		
		  <block type="text_print">
			<value name="TEXT">
				<block type="text">
				  <field name="TEXT">OK</field>
				</block>
			</value>
		  </block>
		  
		  <!-- Prints 123 -->		
		  <block type="text_print">
			<value name="TEXT">
				<block type="math_number">
				  <field name="NUM">123</field>
				</block>
			</value>
		  </block>	

		  <!-- Counts to 10 -->			
		  <block type="variables_set" id="18" inline="true" x="253" y="150"><field name="VAR">Value</field><value name="VALUE"><block type="math_number" id="19"><field name="NUM">1</field></block></value><next><block type="controls_repeat" id="20"><field name="TIMES">10</field><statement name="DO"><block type="text_print" id="21" inline="false"><value name="TEXT"><block type="variables_get" id="22"><field name="VAR">Value</field></block></value><next><block type="text_print" id="23" inline="false"><value name="TEXT"><block type="text" id="24"><field name="TEXT"> </field></block></value><next><block type="variables_set" id="25" inline="true"><field name="VAR">Value</field><value name="VALUE"><block type="math_arithmetic" id="26" inline="true"><field name="OP">ADD</field><value name="A"><block type="variables_get" id="27"><field name="VAR">Value</field></block></value><value name="B"><block type="math_number" id="28"><field name="NUM">1</field></block></value></block></value></block></next></block></next></block></statement></block></next></block>
		  
		  <!-- Moves an sprite around -->
		  <block type="variables_set" id="30" inline="true" x="148" y="68"><field name="VAR">Position</field><value name="VALUE"><block type="math_number" id="47"><field name="NUM">0</field></block></value><next><block type="controls_whileUntil" id="31" inline="false"><field name="MODE">WHILE</field><value name="BOOL"><block type="logic_boolean" id="32"><field name="BOOL">TRUE</field></block></value><statement name="DO"><block type="hardware_sprite_move" id="53" inline="true"><value name="NUMBER"><block type="math_number" id="54"><field name="NUM">0</field></block></value><value name="X"><block type="variables_get" id="55"><field name="VAR">Position</field></block></value><value name="Y"><block type="variables_get" id="56"><field name="VAR">Position</field></block></value><next><block type="hardware_sprite_move" id="33" inline="true"><value name="NUMBER"><block type="math_number" id="52"><field name="NUM">1</field></block></value><value name="X"><block type="math_arithmetic" id="172" inline="true"><field name="OP">ADD</field><value name="A"><block type="variables_get" id="34"><field name="VAR">Position</field></block></value><value name="B"><block type="math_number" id="175"><field name="NUM">8</field></block></value></block></value><value name="Y"><block type="variables_get" id="35"><field name="VAR">Position</field></block></value><next><block type="hardware_wait_vblank" id="44"><next><block type="hardware_update_sprites" id="36"><next><block type="variables_set" id="37" inline="true"><field name="VAR">Position</field><value name="VALUE"><block type="math_arithmetic" id="38" inline="true"><field name="OP">ADD</field><value name="A"><block type="variables_get" id="39"><field name="VAR">Position</field></block></value><value name="B"><block type="math_number" id="40"><field name="NUM">1</field></block></value></block></value></block></next></block></next></block></next></block></next></block></statement></block></next></block>	  </category>
    </xml>
  </body>
</html>
